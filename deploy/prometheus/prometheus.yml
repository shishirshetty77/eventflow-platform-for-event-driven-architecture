# Prometheus configuration for EventFlow Platform

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    monitor: 'eventflow-platform'
    environment: 'docker'

# Alerting rules
rule_files:
  - /etc/prometheus/alerts.yml

# Scrape configurations
scrape_configs:
  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
    relabel_configs:
      - target_label: service
        replacement: prometheus

  # Auth Service
  - job_name: 'auth-service'
    static_configs:
      - targets: ['auth:9090']
    relabel_configs:
      - target_label: service
        replacement: auth

  # Orders Service
  - job_name: 'orders-service'
    static_configs:
      - targets: ['orders:9090']
    relabel_configs:
      - target_label: service
        replacement: orders

  # Payments Service
  - job_name: 'payments-service'
    static_configs:
      - targets: ['payments:9090']
    relabel_configs:
      - target_label: service
        replacement: payments

  # Notification Service
  - job_name: 'notification-service'
    static_configs:
      - targets: ['notification:9090']
    relabel_configs:
      - target_label: service
        replacement: notification

  # Analyzer Service
  - job_name: 'analyzer-service'
    static_configs:
      - targets: ['analyzer:9090']
    relabel_configs:
      - target_label: service
        replacement: analyzer

  # Alert Engine Service
  - job_name: 'alert-engine-service'
    static_configs:
      - targets: ['alert-engine:9090']
    relabel_configs:
      - target_label: service
        replacement: alert-engine

  # UI Backend Service
  - job_name: 'ui-backend-service'
    static_configs:
      - targets: ['ui-backend:9090']
    relabel_configs:
      - target_label: service
        replacement: ui-backend
